CREATE TABLE [dbo].[Groups] (
    [GroupId] [int] NOT NULL IDENTITY,
    [Name] [nvarchar](max) NOT NULL,
    CONSTRAINT [PK_dbo.Groups] PRIMARY KEY ([GroupId])
)
CREATE TABLE [dbo].[AspNetUsers] (
    [Id] [nvarchar](128) NOT NULL,
    [Email] [nvarchar](256),
    [EmailConfirmed] [bit] NOT NULL,
    [PasswordHash] [nvarchar](max),
    [SecurityStamp] [nvarchar](max),
    [PhoneNumber] [nvarchar](max),
    [PhoneNumberConfirmed] [bit] NOT NULL,
    [TwoFactorEnabled] [bit] NOT NULL,
    [LockoutEndDateUtc] [datetime],
    [LockoutEnabled] [bit] NOT NULL,
    [AccessFailedCount] [int] NOT NULL,
    [UserName] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [UserNameIndex] ON [dbo].[AspNetUsers]([UserName])
CREATE TABLE [dbo].[AspNetUserClaims] (
    [Id] [int] NOT NULL IDENTITY,
    [UserId] [nvarchar](128) NOT NULL,
    [ClaimType] [nvarchar](max),
    [ClaimValue] [nvarchar](max),
    CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserClaims]([UserId])
CREATE TABLE [dbo].[AspNetUserLogins] (
    [LoginProvider] [nvarchar](128) NOT NULL,
    [ProviderKey] [nvarchar](128) NOT NULL,
    [UserId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey], [UserId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserLogins]([UserId])
CREATE TABLE [dbo].[AspNetUserRoles] (
    [UserId] [nvarchar](128) NOT NULL,
    [RoleId] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY ([UserId], [RoleId])
)
CREATE INDEX [IX_UserId] ON [dbo].[AspNetUserRoles]([UserId])
CREATE INDEX [IX_RoleId] ON [dbo].[AspNetUserRoles]([RoleId])
CREATE TABLE [dbo].[Transactions] (
    [TransactionId] [int] NOT NULL IDENTITY,
    [Description] [nvarchar](max) NOT NULL,
    [Amount] [float] NOT NULL,
    [GroupId] [int] NOT NULL,
    [UserPayingId] [nvarchar](max),
    CONSTRAINT [PK_dbo.Transactions] PRIMARY KEY ([TransactionId])
)
CREATE INDEX [IX_GroupId] ON [dbo].[Transactions]([GroupId])
CREATE TABLE [dbo].[AspNetRoles] (
    [Id] [nvarchar](128) NOT NULL,
    [Name] [nvarchar](256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY ([Id])
)
CREATE UNIQUE INDEX [RoleNameIndex] ON [dbo].[AspNetRoles]([Name])
CREATE TABLE [dbo].[ApplicationUserGroups] (
    [ApplicationUser_Id] [nvarchar](128) NOT NULL,
    [Group_GroupId] [int] NOT NULL,
    CONSTRAINT [PK_dbo.ApplicationUserGroups] PRIMARY KEY ([ApplicationUser_Id], [Group_GroupId])
)
CREATE INDEX [IX_ApplicationUser_Id] ON [dbo].[ApplicationUserGroups]([ApplicationUser_Id])
CREATE INDEX [IX_Group_GroupId] ON [dbo].[ApplicationUserGroups]([Group_GroupId])
CREATE TABLE [dbo].[TransactionApplicationUsers] (
    [Transaction_TransactionId] [int] NOT NULL,
    [ApplicationUser_Id] [nvarchar](128) NOT NULL,
    CONSTRAINT [PK_dbo.TransactionApplicationUsers] PRIMARY KEY ([Transaction_TransactionId], [ApplicationUser_Id])
)
CREATE INDEX [IX_Transaction_TransactionId] ON [dbo].[TransactionApplicationUsers]([Transaction_TransactionId])
CREATE INDEX [IX_ApplicationUser_Id] ON [dbo].[TransactionApplicationUsers]([ApplicationUser_Id])
ALTER TABLE [dbo].[AspNetUserClaims] ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserLogins] ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[AspNetUserRoles] ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[Transactions] ADD CONSTRAINT [FK_dbo.Transactions_dbo.Groups_GroupId] FOREIGN KEY ([GroupId]) REFERENCES [dbo].[Groups] ([GroupId]) ON DELETE CASCADE
ALTER TABLE [dbo].[ApplicationUserGroups] ADD CONSTRAINT [FK_dbo.ApplicationUserGroups_dbo.AspNetUsers_ApplicationUser_Id] FOREIGN KEY ([ApplicationUser_Id]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
ALTER TABLE [dbo].[ApplicationUserGroups] ADD CONSTRAINT [FK_dbo.ApplicationUserGroups_dbo.Groups_Group_GroupId] FOREIGN KEY ([Group_GroupId]) REFERENCES [dbo].[Groups] ([GroupId]) ON DELETE CASCADE
ALTER TABLE [dbo].[TransactionApplicationUsers] ADD CONSTRAINT [FK_dbo.TransactionApplicationUsers_dbo.Transactions_Transaction_TransactionId] FOREIGN KEY ([Transaction_TransactionId]) REFERENCES [dbo].[Transactions] ([TransactionId]) ON DELETE CASCADE
ALTER TABLE [dbo].[TransactionApplicationUsers] ADD CONSTRAINT [FK_dbo.TransactionApplicationUsers_dbo.AspNetUsers_ApplicationUser_Id] FOREIGN KEY ([ApplicationUser_Id]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201504112215363_Initial', N'DataAccessLayer.Migrations.Configuration',  0x1F8B0800000000000400D51DD96EE4B8F13D40FE41D0531278BB7D640613A37B175E1F1B23E303D39E45DE0C5AA2DBC2E8E895A8591B41BE2C0FF9A4FC42485D2DDEA4A46EC91860302D92C562B1AA585564D5FCEF3FFF5DFCF41A85CE77986641122FDDA3D9A1EBC0D84BFC205E2FDD1C3DFFF0C9FDE9C73FFE6171E947AFCEAF75BF13D20F8F8CB3A5FB82D0E6743ECFBC1718816C16055E9A64C9339A794934077E323F3E3CFCDBFCE8680E310817C3729CC5973C4641048B1FF8E779127B70837210DE243E0CB3EA3B6E5915509D5B10C16C033CB8742F0002679E07B3EC337883A9EB9C8501C068AC60F8EC3A208E13041046F2F46B0657284DE2F56A833F80F0E16D0371BF671066B042FE74DBDD741D87C7641DF3EDC01A94976728892C011E9D548499B3C33B91D76D0887497789498CDEC8AA0BF22DDD5FD224DFB80E3BD3E97998925E1C696705840066B3CBD70D8C33985DE071413C2B001D384CF783863D3017913F07CE791EA23C85CB18E62805E181739F3F8581F70FF8F6907C83F132CEC3B08D33C61AB7511FF0A7FB34D9C014BD7D81CFED955CFBAE33A707CFD9D1CD587660B9E0EB189D1CBBCE2D46033C85B0618E1671562849E12F30862940D0BF0708C114EFEDB50F0BF27228301392BFEBD9303762A9729D1BF0FA19C66BF4B274F13F5DE72A78857EFDA5C2E06B1C6021C483509A430186CCACB7E07BB02E1066E6BF81D113DE15D7F902C3A23D7B0936A5B0CCCE361BBC19C5572C2BE963411CDCF52A4DA22F09994CDCE3F101A46B88F0B21265B75592A71E83EB62BE654B25B332303BB12D03634C8EEDC2AC5B3E1570CED1F1A741388799F3120B78A898F6F8C347A3690D66C14AFF394823D8ACF2E704731388AD71BE0759F67B92FA7F07D9CB00B2A69E6C05BD3CC5ACBA4220DAEC7CB6FB972486B73991E17DCE35D8D63CFC9E5C010FABD0CB988CEA0DEF73E27D4B727419FB5894E157E4D500C9CF8720320730083AA52EB9C2CC0CFDF304DB34BA83450D8E2829CD81612A7F9D0F8CF3100491D9795177959F17658FE620909D1755B7FA583145B53EAF863CDA74A83227A029AA9F9375109BA15A7795A35AF6D0A25A75B345950033C3B4EA2947B4E8A0C5B3EC658BE6430AE20CAB1682A210DB5687C77B90A2C00B36204614C2B23E9C8523EDD8CBC6A98D48428642065456CE4D63F89F659B5B8866F5E8D2DE79BB4A314C7C0C7E9B71600F1CE3C15B93E8D8D4243A397A7A3EF9F4E123F04F3EFE159E7CD8BF79B47B339E90720C73ACD83E32E9CE4FFF62A65F41980F3D5527692874D7F0D250809DBE341468E2CFDF039FD87D73FD88BA33066FD4BFE6675B996330DBB73850CBDCF7E4FBD1019DC4851C52C34B0B813A7D6111B3B2B02B595017AE1F4BFBD7F84E84E35A46D01051C416B83123332D34BAF006337C5F06C905CCBC34D8947BB1F3F022EBF6466D5FF722C11B610FC43014ABD7C9F7E00DAF5B29271D4D24B5E7A9F53AAA5E6277A368E47C23BE87AD5F44BB3A43FB452A7C850E54AFA36DF863ED7D1C69EF25583C76AC8A48BF98C9DBFBFD5875DBB237DFCA31B6A08B0D4B9F6559E2050556E2FB8C3A7846AFF432F61DB3485A4973415406EF00E6D0807CC378E1AD77597EBB8B2F60081174CEBCF29EF21C641EF079BAE3B5F996F83571932D7E8220078DE15FB889B124C0948C02E49220C37216C488179B2026DA2634A21833DA50EC08119A79D8960B88CD19B23823929820203565E7CD5CCC0EE928B598B738D18E41AB90A92903B0F1536306E5B75F3B8980CBAAB35609BA0731AAA0AC299E6C84766AD2CA848625D25A0561F622AD34C54690569A24EF4E5ACB58BCE9FE3381F9A9B1277D2320E1CED238DC0B7352E41A8137297A4C9E35791748B6EF0A7F68BBE754D4C1FCE8907B52BA53635026EFC47F52DC4DF65EF236CA8A01A51BD313813D731FE5DE9A308AD8D71D9417C5D78C5DAD250BC2085C2219BE2AFF8857C62245BCA38342E195EDFF949053690F47849C1226938B03E13B91D0D23FC663101E0153DE7CB978228DF01509223D786155B027AB82052C6710E02B889817215BA79C56F49C84D2C3AB4001379A93490D1CCEE5150115F8C51660EB57224AB095016F01B67AD2A1845A8A940628FD3C83834729520D281D4E427C5ADCB885247BC0D4EAAC7EEAC48A8B71BCA65953C3649CE819C7565AB0448CC6AA539A121DA8540B959E4AA290814DD0A0179598D8400B56BD80C129530BA19E32A2F8814D04A11765186F5FC23FF56206A75225BF7A22097C580B2FB61789688F5342A16A21BD0924B823E289A3F1A20CFDA8D64A688DACA08DDC73DA854CC9AFA3D43491DBF676D67D5F0A09ED791D2F76A093E84683A790CEC83735F35B0B1072BDA9553E9024D5D72C8D19D9B42DE6658658F5613197A4922D6EC06613C4EB566A59F5C559957965E73FACEC73AEA212C6DCA3E8CC1ABDCD4C2849C11A32AD786A8CE955906688BC827802E40AECDC8FB86E42A359623BD553527631BF85B549557727FFAE1E1830AF38843A684BC52BBCB088B827C5BB065651F0E31C92DA074290CA5E059C27611EC59A88821C4E7935D906527EE1212CE6CC12389F882313E7B0D24437DA1299709AEF08EB95D8EF8D16828CBAEC06D9ED4D9563D406507DB284D14A53E180B5DACCA1D299446D98748B3944265DA80D9269B2C0B29D144421D96EE8044F4251710FF319F834A03674BED51CB22021A80D5AD0DC01B60067B6CD1CAA2067A80D58D06C0E7B9B40D406B9FD3A19ED27705CFBA8423E9662AF0C0D60EC461DD69735EC96D94169650AB401B53E5BC2AA72013860D5F749B292D4CDEEC64A65FCAC1F2B4960C8750EF5C09E5639CAAC00394CEAD53CA5D65559037278760C3B01B6900516BA7145116FECC7146210BB551075CCBF0D45760F30DAAE512E789F0D6B0798EDF74A395A6AE4D02FC1290B47F5C65C05937AE6DD86483558181F91C0E2886CCD8CA19C34FAF536CBDEDB96C9B0E7708AA4A712B15320FDEC93E9B8D2747C88DE1AD9AD85B1FFDC8CD078C9D2602C2B6ACABB0E9E76463BC702155FE2B690E98CA7F436D952233C2A9E83C8F0642381D6CC200F2A1B9D18CC18C5E9A089A008C8AD0B481B12DCECB079D41C3C96ACA28B7B8FC2D47A66E1A2C76C97466F355164265ABCA822B7FAEA645C28B7ECE23AB5ADBD74576F1982D18C7498AD7E0BCFC30092E3B7EE7003E2E01966A84C27718F0F8F8E991A67D3A93736CF323F1444BEB9A263F48EEDB5C6574088ABCDB6EB91F9127F07A9F702D23F45E0F5CF43E55A2A15CB3EB288EA55F179447D2A4A09A11679425BA8DD0B483D056890E251D21DED5C20AA17444111A8A1E00D42425991A72EB0A4059E7CFC1315059EEC162B2EF8D4053569B1A742C3F42CF5B4150CEE11DC75ECC3D7A5FBAF62E4A9538F2C3E1F38D7D9D738F82DC70D0F981ACEBF55923554B9014178741F2A69279A9CCEED37DF86EB7F3E96430F9CBB141FDBA7CE2143FC2ECA92ABF7D24BD0F99A2E16E07AD46DE9C019EFACE4C960A7A3A0A2C960B0C764EDEE654C3A30CFDE4B808CAD26E8C22056D89443F7B1B3D220EA787539767282084A71D8B8040243832AAFF11C26C0DEBE10394106DC510DA3D963809A1CBB3C77BA6A8D89F847DDAC40B2E811AC407D2CD48CF646211F494C401651D4EF9E68D60E2A940733A8726716D941803B887117AD3E408CC22656D9858BACCE0916033BCA4B01F552A65364D97D153D994066BA20496BFCD226FBCC2F54BDA89A58DEB9C585DBA4794E78C62AD032297DF28E38CFE4BAB5BB4D3122238A2EC95ADBCEEFF3EEAB134C93E9CCB77C885A079DF94D7BBD3D02ABD9D5299A80B213A42B8F5F8D68DF07ACEC9DE9C40F58AB9A4313E3B532697CF4D242FBE634C9B3B389319A7905A1710F4DAA8A41D73231EFE088543FA67D2F1580749E4087DDDC3D5FA9B4A8AADB4EB8CE960FB4AFCFBA7060170D6AF5246E4C16D5F808D33B53A7CAAA239CB33D797432EE6BC7426153A90D36A675A779DD3F0DD36EF4E25F7CB903764FE902509549B70D3AD3A65EF9C276E9FA4F09DEF3326A2D294FC242E674113707D743345B59455E5CE9839D521033E62615F4514F2BA9FDA49ABB72A79573577DD4734BEA06A9E62E25503975D9453DB3B88A083B3165BE717352ADA2E9544561A48BD42C50B738B3858923723A0E56088DA8A7157DF5E2A4EAACA13ED39F476CE4926F54B11BAE8D53B6CA3B2641C657AB953D1407AAF0D614FF312DF4264959D9018954AC2ECFD1DA19A1EAEA46C68412E7C7F0718CD68A844B9824517657056F1091A20E3A497AFEF044D955D1BB4148D23E9EC4B9E9FD09327891BB2E222238FBB9FCEE61972AAC31675EC94EAF523B2CC9D86137CB71DC21C1E48AD532F57007023405C2EDB808A0502788F4C15E348B45D13F3E3D133BAD794CF285CA5F17300BD65B100B0C33861EE5AE367DAEE3E7A4F69A198CEA2ECC23AD1B88804FD289315F3EE3BDC7CD2455A8F8FFB08AF40B92B0F604FDEBF82E479B1CE125C3E829A4F21688F7AD9ABFA86C48E3BCB82B1E1D67432C01A3199014ABBBF8E73C08FD06EF2BC1F32F0908E2D657CFAAC95E22F2BC7AFDD640BA4D62434015F99A68C4038C36210696DDC52BF01D76C10DB3DF67B806DEDB3691430644BF1134D917170158A720CA2A18DBF1F827E6613F7AFDF1FFBBA0B01469890000 , N'6.1.1-30610')

