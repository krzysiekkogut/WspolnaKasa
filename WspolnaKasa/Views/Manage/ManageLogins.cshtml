@model WspolnaKasa.Models.ManageLoginsViewModel
@using Microsoft.Owin.Security
@{
    ViewBag.Title = WspolnaKasa.App_GlobalResources.Translations.Manage_ManageLogins_Title;
    ViewBag.RemoveLink = WspolnaKasa.App_GlobalResources.Translations.Manage_ManageLogins_RemoveLink;
    ViewBag.Connect = WspolnaKasa.App_GlobalResources.Translations.Manage_ManageLogins_Connect;
}

<h2>@ViewBag.Title.</h2>
<hr />
<p class="text-success">@ViewBag.StatusMessage</p>
@{
    var loginProviders = Context.GetOwinContext().Authentication.GetExternalAuthenticationTypes();
    <table class="table">
        <tbody>
            @foreach (var account in Model.CurrentLogins)
            {
                <tr class="col-md-4">
                    <td style="vertical-align:middle; border:none">@account.LoginProvider</td>
                    <td style="vertical-align:middle; border:none">
                        @if (ViewBag.ShowRemoveButton)
                        {
                            using (Html.BeginForm("RemoveLogin", "Manage"))
                            {
                                @Html.AntiForgeryToken()
                                <div>
                                    @Html.Hidden("loginProvider", account.LoginProvider)
                                    @Html.Hidden("providerKey", account.ProviderKey)
                                    <input type="submit" class="btn btn-default" value="@ViewBag.RemoveLink" />
                                </div>
                            }
                        }
                    </td>
                </tr>
            }
            @foreach (AuthenticationDescription p in Model.OtherLogins)
            {
                <tr class="col-md-4">
                    @using (Html.BeginForm("LinkLogin", "Manage"))
                    {
                        @Html.AntiForgeryToken()
                        <td style="vertical-align:middle; border:none">@p.AuthenticationType</td>
                        <td style="vertical-align:middle; border:none">
                            <button type="submit" class="btn btn-default" id="@p.AuthenticationType" name="provider" value="@p.AuthenticationType">@ViewBag.Connect</button>
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
}
